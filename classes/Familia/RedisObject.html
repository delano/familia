<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Familia::RedisObject [familia 0.6.1.]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Familia::RedisObject
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/familia/redisobject_rb.html">lib/familia/redisobject.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000139">classes</a></li>
              <li><a href="#M000141">db</a></li>
              <li><a href="#M000143">inherited</a></li>
              <li><a href="#M000144">new</a></li>
              <li><a href="#M000137">register</a></li>
              <li><a href="#M000138">registration</a></li>
              <li><a href="#M000140">ttl</a></li>
              <li><a href="#M000142">uri</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000151">clear</a></li>
              <li><a href="#M000152">del</a></li>
              <li><a href="#M000150">delete</a></li>
              <li><a href="#M000153">exists?</a></li>
              <li><a href="#M000155">expire</a></li>
              <li><a href="#M000156">expireat</a></li>
              <li><a href="#M000158">from_redis</a></li>
              <li><a href="#M000148">move</a></li>
              <li><a href="#M000146">parent?</a></li>
              <li><a href="#M000145">rediskey</a></li>
              <li><a href="#M000157">to_redis</a></li>
              <li><a href="#M000154">ttl</a></li>
              <li><a href="#M000149">type</a></li>
              <li><a href="#M000147">update_expiration</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>classes</td>
                    <td class='context-item-value'>[W]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>db</td>
                    <td class='context-item-value'>[W]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>name</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>parent</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>parent</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>redis</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ttl</td>
                    <td class='context-item-value'>[W]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>uri</td>
                    <td class='context-item-value'>[W]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000139'>
                <a name='M000139'>      </a>
                <div class='synopsis'>
                  <span class='name'>classes</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000139-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000139-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 19</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RedisObject</span>.<span class="ruby-identifier">classes</span>&#x000A;      <span class="ruby-ivar">@classes</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000141'>
                <a name='M000141'>      </a>
                <div class='synopsis'>
                  <span class='name'>db</span>
                  <span class='arguments'>(v=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000141-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000141-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 31</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">db</span> <span class="ruby-identifier">v</span>=<span class="ruby-keyword kw">nil</span>&#x000A;        <span class="ruby-ivar">@db</span> = <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>&#x000A;        <span class="ruby-ivar">@db</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">parent</span> <span class="ruby-value">? </span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">db</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000143'>
                <a name='M000143'>      </a>
                <div class='synopsis'>
                  <span class='name'>inherited</span>
                  <span class='arguments'>(obj)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000143-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000143-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 39</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inherited</span>(<span class="ruby-identifier">obj</span>)&#x000A;        <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">db</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">db</span>&#x000A;        <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">ttl</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ttl</span>&#x000A;        <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">uri</span>&#x000A;        <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword kw">self</span>&#x000A;        <span class="ruby-constant">RedisObject</span>.<span class="ruby-identifier">classes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">obj</span>&#x000A;        <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">obj</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000144'>
                <a name='M000144'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(name, opts={})</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>name</tt>: If parent is set, this will be used as the suffix for
                  rediskey. Otherwise this becomes the value of the key. If this is an Array,
                  the elements will be joined.
                  </p>
                  <p>
                  Options:
                  </p>
                  <p>
                  :parent: The <a href="../Familia.html">Familia</a> object that this redis
                  object belongs to. This can be a class that includes <a
                  href="../Familia.html">Familia</a> or an instance.
                  </p>
                  <p>
                  :ttl => the time to live in seconds. When not nil, this will set the redis
                  expire for this key whenever save is called. You can also call it
                  explicitly via <a href="RedisObject.html#M000147">update_expiration</a>.
                  </p>
                  <p>
                  :default => the default value (String-only)
                  </p>
                  <p>
                  :class => A class that responds to Familia.load_method and
                  Familia.dump_method. These will be used when loading and saving data
                  from/to redis to unmarshal/marshal the class.
                  </p>
                  <p>
                  :db => the redis database to use (ignored if :redis is used).
                  </p>
                  <p>
                  :redis => an instance of Redis.
                  </p>
                  <p>
                  Uses the redis connection of the parent or the value of opts[:redis] or <a
                  href="../Familia.html#M000037">Familia.redis</a> (in that order).
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000144-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000144-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 77</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">opts</span>={}&#x000A;      <span class="ruby-ivar">@name</span>, <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">name</span>, <span class="ruby-identifier">opts</span>&#x000A;      <span class="ruby-ivar">@name</span> = <span class="ruby-ivar">@name</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Familia</span>.<span class="ruby-identifier">delim</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@name</span>&#x000A;      <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:ttl</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ttl</span>&#x000A;      <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:db</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">db</span>&#x000A;      <span class="ruby-ivar">@parent</span> = <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:parent</span>)&#x000A;      <span class="ruby-ivar">@redis</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">redis</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent?</span>&#x000A;      <span class="ruby-ivar">@redis</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:redis</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">redis</span>(<span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:db</span>])&#x000A;      <span class="ruby-identifier">init</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:init</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000137'>
                <a name='M000137'>      </a>
                <div class='synopsis'>
                  <span class='name'>register</span>
                  <span class='arguments'>(klass, meth)</span>
                </div>
                <div class='description'>
                  <p>
                  To be called inside every class that inherits <a
                  href="RedisObject.html">RedisObject</a> <tt>meth</tt> becomes the base for
                  the class and instances methods that are created for the given
                  <tt>klass</tt> (e.g. Obj.list)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000137-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000137-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 11</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RedisObject</span>.<span class="ruby-identifier">register</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">meth</span>&#x000A;      <span class="ruby-identifier">registration</span>[<span class="ruby-identifier">meth</span>] = <span class="ruby-identifier">klass</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000138'>
                <a name='M000138'>      </a>
                <div class='synopsis'>
                  <span class='name'>registration</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000138-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000138-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 15</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RedisObject</span>.<span class="ruby-identifier">registration</span>&#x000A;      <span class="ruby-ivar">@registration</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000140'>
                <a name='M000140'>      </a>
                <div class='synopsis'>
                  <span class='name'>ttl</span>
                  <span class='arguments'>(v=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000140-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000140-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 27</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl</span> <span class="ruby-identifier">v</span>=<span class="ruby-keyword kw">nil</span>&#x000A;        <span class="ruby-ivar">@ttl</span> = <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>&#x000A;        <span class="ruby-ivar">@ttl</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">parent</span> <span class="ruby-value">? </span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">ttl</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000142'>
                <a name='M000142'>      </a>
                <div class='synopsis'>
                  <span class='name'>uri</span>
                  <span class='arguments'>(v=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000142-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000142-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 35</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uri</span> <span class="ruby-identifier">v</span>=<span class="ruby-keyword kw">nil</span>&#x000A;        <span class="ruby-ivar">@uri</span> = <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>&#x000A;        <span class="ruby-ivar">@uri</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">parent</span> <span class="ruby-value">? </span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">uri</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000151'>
                <a name='M000151'>      </a>
                <div class='synopsis'>
                  <span class='name'>clear</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Alias for <a href="RedisObject.html#M000150">delete</a>
                  </p>
                </div>
              </div>
              <div class='method public-instance' id='method-M000152'>
                <a name='M000152'>      </a>
                <div class='synopsis'>
                  <span class='name'>del</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Alias for <a href="RedisObject.html#M000150">delete</a>
                  </p>
                </div>
              </div>
              <div class='method public-instance' id='method-M000150'>
                <a name='M000150'>      </a>
                <div class='synopsis'>
                  <span class='name'>delete</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000150-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000150-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 115</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span> &#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">del</span> <span class="ruby-identifier">rediskey</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000153'>
                <a name='M000153'>      </a>
                <div class='synopsis'>
                  <span class='name'>exists?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  def destroy!
                  </p>
                  <pre>clear&#x000A;# TODO: delete redis objects for this instance</pre>
                  <p>
                  end
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000153-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000153-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 126</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>&#x000A;      <span class="ruby-operator">!</span><span class="ruby-identifier">size</span>.<span class="ruby-identifier">zero?</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000155'>
                <a name='M000155'>      </a>
                <div class='synopsis'>
                  <span class='name'>expire</span>
                  <span class='arguments'>(sec)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000155-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000155-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 134</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expire</span> <span class="ruby-identifier">sec</span>&#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">expire</span> <span class="ruby-identifier">rediskey</span>, <span class="ruby-identifier">sec</span>.<span class="ruby-identifier">to_i</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000156'>
                <a name='M000156'>      </a>
                <div class='synopsis'>
                  <span class='name'>expireat</span>
                  <span class='arguments'>(unixtime)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000156-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000156-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 138</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expireat</span> <span class="ruby-identifier">unixtime</span>&#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">expireat</span> <span class="ruby-identifier">rediskey</span>, <span class="ruby-identifier">unixtime</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000158'>
                <a name='M000158'>      </a>
                <div class='synopsis'>
                  <span class='name'>from_redis</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000158-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000158-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 152</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_redis</span> <span class="ruby-identifier">v</span>&#x000A;      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>]&#x000A;      <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>]&#x000A;      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>&#x000A;        <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_s</span>&#x000A;      <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>, <span class="ruby-constant">Float</span>&#x000A;        <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>].<span class="ruby-identifier">induced_from</span> <span class="ruby-identifier">v</span>&#x000A;      <span class="ruby-keyword kw">else</span>&#x000A;        <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>].<span class="ruby-identifier">method_defined?</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">load_method</span>&#x000A;          <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>].<span class="ruby-identifier">send</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">load_method</span>, <span class="ruby-identifier">v</span>&#x000A;        <span class="ruby-keyword kw">else</span>&#x000A;          <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">ld</span> <span class="ruby-node">&quot;No such method: #{@opts[:class]}##{Familia.load_method}&quot;</span>&#x000A;          <span class="ruby-identifier">v</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000148'>
                <a name='M000148'>      </a>
                <div class='synopsis'>
                  <span class='name'>move</span>
                  <span class='arguments'>(db)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000148-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000148-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 105</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move</span> <span class="ruby-identifier">db</span>&#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">move</span> <span class="ruby-identifier">rediskey</span>, <span class="ruby-identifier">db</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000146'>
                <a name='M000146'>      </a>
                <div class='synopsis'>
                  <span class='name'>parent?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000146-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000146-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 94</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parent?</span>&#x000A;      <span class="ruby-constant">Class</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Familia</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000145'>
                <a name='M000145'>      </a>
                <div class='synopsis'>
                  <span class='name'>rediskey</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  returns a redis key based on the parent object so it will include the
                  proper index.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000145-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000145-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 90</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rediskey</span>&#x000A;      <span class="ruby-identifier">parent?</span> <span class="ruby-value">? </span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">rediskey</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">rediskey</span>(<span class="ruby-identifier">name</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000157'>
                <a name='M000157'>      </a>
                <div class='synopsis'>
                  <span class='name'>to_redis</span>
                  <span class='arguments'>(v)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000157-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000157-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 142</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_redis</span> <span class="ruby-identifier">v</span>&#x000A;      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:class</span>]&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">dump_method</span>&#x000A;        <span class="ruby-identifier">v</span>.<span class="ruby-identifier">send</span> <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">dump_method</span>&#x000A;      <span class="ruby-keyword kw">else</span>&#x000A;        <span class="ruby-constant">Familia</span>.<span class="ruby-identifier">ld</span> <span class="ruby-node">&quot;No such method: #{v.class}.#{Familia.dump_method}&quot;</span>&#x000A;        <span class="ruby-identifier">v</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000154'>
                <a name='M000154'>      </a>
                <div class='synopsis'>
                  <span class='name'>ttl</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000154-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000154-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 130</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl</span>&#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">ttl</span> <span class="ruby-identifier">rediskey</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000149'>
                <a name='M000149'>      </a>
                <div class='synopsis'>
                  <span class='name'>type</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  TODO: rename, renamenx
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000149-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000149-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 111</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type</span> &#x000A;      <span class="ruby-identifier">redis</span>.<span class="ruby-identifier">type</span> <span class="ruby-identifier">rediskey</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000147'>
                <a name='M000147'>      </a>
                <div class='synopsis'>
                  <span class='name'>update_expiration</span>
                  <span class='arguments'>(ttl=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000147-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000147-source'><span class="ruby-comment cmt"># File lib/familia/redisobject.rb, line 98</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_expiration</span>(<span class="ruby-identifier">ttl</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;      <span class="ruby-identifier">ttl</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@opts</span>[<span class="ruby-identifier">:ttl</span>]&#x000A;      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">ttl</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ttl</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>&#x000A;      <span class="ruby-comment cmt">#Familia.trace :SET_EXPIRE, Familia.redis(self.class.uri), &quot;#{rediskey} to #{self.ttl}&quot;</span>&#x000A;      <span class="ruby-identifier">expire</span> <span class="ruby-identifier">ttl</span>.<span class="ruby-identifier">to_i</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
